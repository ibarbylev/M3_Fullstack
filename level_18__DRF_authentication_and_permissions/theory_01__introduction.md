## 1. Ещё раз про Аутентификацию и Авторизацию


* **Аутентификация (Authentication)** — проверка **кто вы** (идентификация пользователя).
* **Авторизация / разрешения (Authorization / Permissions)** — проверка **что вы можете делать** (доступ к ресурсам).

В DRF аутентификация и авторизация реализуются через **классы**:

* **Authentication Classes** → определяют, как DRF узнаёт пользователя (`request.user`).
* **Permission Classes** → определяют, имеет ли пользователь доступ к конкретному view или объекту (`request.user` + объект).

---

## 2. Таблица вариантов аутентификации и авторизации в DRF

| Метод аутентификации                                                                | Надёжность                                   | Плюсы                                                                                         | Минусы / Риски                                                                         |
|-------------------------------------------------------------------------------------| -------------------------------------------- | --------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| `BasicAuthentication`                                                               | ★☆☆☆☆ (низкая)                               | Очень просто, работает сразу                                                                  | Пароли передаются в каждом запросе (только HTTPS защищает), легко подделать без HTTPS  |
| `SessionAuthentication`                                                             | ★★☆☆☆ (низкая-средняя)                       | Хорошо интегрируется с Django, защищает cookie                                                | Уязвим к CSRF, не подходит для внешних клиентов / API без cookie                       |
| `TokenAuthentication`                                                               | ★★★☆☆ (средняя)                              | Статический токен, легко использовать для мобильных клиентов                                  | Токен бессрочный, легко украсть, токен нельзя отозвать до ручного удаления             |
| `JWT (JSON Web Token)`                                                              | ★★★★☆ (средняя-высокая)                      | Статeless, токен с истечением, подходит для масштабируемых приложений                         | Токен нельзя легко отозвать до истечения срока, требует HTTPS, нужно проверять подпись |
| `OAuth2` (через django-oauth-toolkit)                                               | ★★★★★ (высокая)                              | Стандартизированный протокол, refresh-токены, scope, легко интегрируется с внешними сервисами | Сложнее настроить, требует понимания протокола                                         |
| `Custom Authentication` <br> (с HMAC / API keys / <br>двухфакторная аутентификация) | ★★★★★ (очень высокая, зависит от реализации) | Полная гибкость, можно включить MFA, ключи с истечением и подписью                            | Требует собственной реализации, сложнее тестировать и поддерживать                     |

---

## 3. Таблица вариантов авторизации (permissions)

| Permission Class            | Краткое описание                                                        | Примеры использования                                                 |
| --------------------------- | ----------------------------------------------------------------------- | --------------------------------------------------------------------- |
| `AllowAny`                  | Любой пользователь имеет доступ                                         | Публичные endpoints                                                   |
| `IsAuthenticated`           | Доступ только аутентифицированным                                       | Личный профиль, заказ пользователя                                    |
| `IsAdminUser`               | Доступ только администраторам                                           | Панель управления, закрытые действия                                  |
| `IsAuthenticatedOrReadOnly` | Аутентификация нужна только для записи, чтение для всех                 | Блоги, комментарии                                                    |
| `DjangoModelPermissions`    | Использует стандартные права Django (`add`, `change`, `delete`, `view`) | Сложные CRUD-системы                                                  |
| `Custom Permissions`        | Пользователь может написать свой класс                                  | Любые сложные правила, например, владелец объекта может редактировать |


