## üìç –ì–¥–µ `DTL` —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ `settings.py`

–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å - DTL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Django –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',  # DTL
        'DIRS': [BASE_DIR / 'templates'],  # –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –≤–∞—à–∏–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏
        'APP_DIRS': True,  # –∏—Å–∫–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –≤ –ø–∞–ø–∫–µ templates –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]
```

–ó–¥–µ—Å—å –≤–∞–∂–Ω–æ:

* `'BACKEND': 'django.template.backends.django.DjangoTemplates'` ‚Äî —ç—Ç–æ —É–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **DTL**.


---

`'APP_DIRS': True` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ—é –ø–∞–ø–∫—É `templates` –≤–Ω—É—Ç—Ä–∏ –ö–ê–ñ–î–û–ì–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
–ù–∞–ø—Ä–∏–º–µ—Ä:
```
shop/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ shop/
‚îÇ       ‚îî‚îÄ‚îÄ product_list.html
‚îú‚îÄ‚îÄ views.py

```

---


## ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã DTL

### 1. **Jinja2**

–°–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞.

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Jinja2** –≤ Django:

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
pip install Jinja2
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ `settings.py`:

–í–æ–∑–º–æ–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DTL –∏ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ:
```python
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.jinja2.Jinja2',
        'DIRS': [BASE_DIR / 'jinja_templates'],
        'APP_DIRS': False,  # Jinja2 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç APP_DIRS
        'OPTIONS': {
            'environment': 'main.jinja2.environment',  # –ø—É—Ç—å –∫ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        },
    },
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {},
    },
]
```
–ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π py-—Ñ–∞–π–ª –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ, —á—Ç–æ –∏ `settings.py`:
```
main/
‚îú‚îÄ‚îÄ jinja2.py  ‚Üê –≤–æ—Ç –æ–Ω
‚îú‚îÄ‚îÄ settings.py
```

#### –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `jinja2.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```python
from jinja2 import Environment
from django.contrib.staticfiles.storage import staticfiles_storage
from django.urls import reverse

def environment(**options):
    env = Environment(**options)
    env.globals.update({
        'static': staticfiles_storage.url,
        'url': reverse,
    })
    return env
```

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ: `.html` –≤ `templates/` ‚Äî —á–µ—Ä–µ–∑ DTL, –∞ —à–∞–±–ª–æ–Ω—ã –≤ `jinja_templates/` ‚Äî —á–µ—Ä–µ–∑ Jinja2.

---

### 2. **Mako** (—Ä–µ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

```python
'BACKEND': 'django.template.backends.mako.MakoTemplates'
```

–î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [django-mako-plus](https://github.com/dcramer/django-mako-plus).

---

### 3. **Chameleon**, **Cheetah** –∏ –¥—Ä—É–≥–∏–µ

–ú–µ–Ω–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã –∏ —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

---

## üü° –°—Ä–∞–≤–Ω–µ–Ω–∏–µ DTL –∏ Jinja2 (–≤–∫—Ä–∞—Ç—Ü–µ)

| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å        | DTL       | Jinja2                       |
| ------------------ | --------- | ---------------------------- |
| –°–∫–æ—Ä–æ—Å—Ç—å           | –£–º–µ—Ä–µ–Ω–Ω–∞—è | –ë—ã—Å—Ç—Ä–∞—è                      |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ Django | –í—Å—Ç—Ä–æ–µ–Ω–∞  | –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏            |
| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å   | –ë–∞–∑–æ–≤–∞—è   | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è (–º–∞–∫—Ä–æ—Å—ã –∏ —Ç.–ø.) |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ | –ï—Å—Ç—å      | –ì–∏–±–∫–∞—è –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è         |

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ DTL vs Jinja2

| **–ö—Ä–∏—Ç–µ—Ä–∏–π**                 | **Django Template Language (DTL)**                                       | **Jinja2**                                                               |
| ---------------------------- | ------------------------------------------------------------------------ | ------------------------------------------------------------------------ |
| **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**              | –í—Å—Ç—Ä–æ–µ–Ω –≤ Django                                                         | –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Django backend                 |
| **–°–∫–æ—Ä–æ—Å—Ç—å**                 | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–º–µ–Ω—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)                               | –ë—ã—Å—Ç—Ä–µ–µ –∑–∞ —Å—á—ë—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ –≤ –±–∞–π—Ç–∫–æ–¥                            |
| **–°–∏–Ω—Ç–∞–∫—Å–∏—Å**                | –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π                                                 | –ë–æ–ª–µ–µ –º–æ—â–Ω—ã–π, –ø–æ—Ö–æ–∂ –Ω–∞ Python                                            |
| **–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π**            | –ó–∞–ø—Ä–µ—â—ë–Ω (–Ω–∞–ø—Ä—è–º—É—é)                                                      | –†–∞–∑—Ä–µ—à—ë–Ω: –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã                   |
| **–†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏**       | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è: –Ω–µ—Ç list slicing, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ç.–¥.                       | –ü–æ–ª–Ω–∞—è: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ä–µ–∑–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤                        |
| **–§–∏–ª—å—Ç—Ä—ã –∏ —Ç–µ–≥–∏**           | –û–≥—Ä–∞–Ω–∏—á–µ–Ω—ã, —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è Django                                 | –†–∞—Å—à–∏—Ä—è–µ–º—ã–µ –∏ –≥–∏–±–∫–∏–µ                                                     |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (XSS)**       | HTML —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                          | –¢–æ–∂–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç HTML –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                        |
| **–®–∞–±–ª–æ–Ω-–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ**      | –ï—Å—Ç—å `{% extends %}`, `{% block %}`                                      | –ï—Å—Ç—å —Ç–µ –∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏                                                   |
| **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã/—Ç–µ–≥–∏**   | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `@register.filter`, `@register.simple_tag` –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–µ Python-—Ñ—É–Ω–∫—Ü–∏–∏                                        |
| **–õ–æ–≥–∏–∫–∞ –≤ —à–∞–±–ª–æ–Ω–µ**         | –û—á–µ–Ω—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ (–∏ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ)                                          | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É, –≤–∫–ª—é—á–∞—è —Ü–∏–∫–ª—ã, `if/elif`, `set`       |
| **–†–∞–±–æ—Ç–∞ —Å `static`, `url`** | –ß–µ—Ä–µ–∑ `{% static %}`, `{% url %}`                                        | –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ `static()` –∏ `url()` —á–µ—Ä–µ–∑ `jinja2_env.environment` |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ `APP_DIRS`**     | –î–∞                                                                       | –ù–µ—Ç (–Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `DIRS` —è–≤–Ω–æ)                                        |
| **–¢–∏–ø–∏—á–Ω—ã–π —Å—Ç–∏–ª—å –ø—Ä–æ–µ–∫—Ç–∞**   | –õ–µ–≥—á–µ —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã "–≥–ª—É–ø—ã–º–∏"                                       | –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª—å—à–µ –ª–æ–≥–∏–∫–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å–∞–º–æ–¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã                       |

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤

### ‚ñ∂Ô∏è DTL-–ø—Ä–∏–º–µ—Ä (`templates/shop/product.html`):

```django
{% extends "base.html" %}

{% block content %}
  <h1>{{ product.name }}</h1>
  <p>{{ product.description }}</p>
  <p>–¶–µ–Ω–∞: {{ product.price }} ‚ÇΩ</p>

  {% if product.available %}
    <p>–í –Ω–∞–ª–∏—á–∏–∏</p>
  {% else %}
    <p>–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</p>
  {% endif %}

  <a href="{% url 'shop:cart_add' product.id %}">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</a>
{% endblock %}
```

---

### ‚ñ∂Ô∏è Jinja2-–ø—Ä–∏–º–µ—Ä (`jinja2/shop/product.html`):

```jinja2
{% extends "base.html" %}

{% block content %}
  <h1>{{ product.name }}</h1>
  <p>{{ product.description }}</p>
  <p>–¶–µ–Ω–∞: {{ product.price }} ‚ÇΩ</p>

  {% if product.available %}
    <p>–í –Ω–∞–ª–∏—á–∏–∏</p>
  {% else %}
    <p>–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</p>
  {% endif %}

  <a href="{{ url('shop:cart_add', product.id) }}">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</a>
{% endblock %}
```

---

### üîç –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –ø—Ä–∏–º–µ—Ä–∞–º:

| –ß—Ç–æ                | DTL                         | Jinja2                        |
| ------------------ | --------------------------- | ----------------------------- |
| –í—ã–∑–æ–≤ `url`        | `{% url '–∏–º—è' –∞—Ä–≥—É–º–µ–Ω—Ç—ã %}` | `{{ url('–∏–º—è', –∞—Ä–≥—É–º–µ–Ω—Ç—ã) }}` |
| –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ/–±–ª–æ–∫–∏ | –û–¥–∏–Ω–∞–∫–æ–≤–æ                   | –û–¥–∏–Ω–∞–∫–æ–≤–æ                     |
| –£—Å–ª–æ–≤–∏—è/—Ü–∏–∫–ª—ã      | –û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏                | –û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏                  |

---

