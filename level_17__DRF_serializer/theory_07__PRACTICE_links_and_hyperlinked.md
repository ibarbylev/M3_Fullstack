## Links & HiperLinked

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π `Author` –∏ `Book`.   
–° –ø–æ–º–æ—â—å—é –Ω–∏—Ö –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

1. **–í–ª–æ–∂–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–Ω–∏–≥**   
   ‚Äî –∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –µ–≥–æ –∫–Ω–∏–≥   
   ‚Äî —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π (`AuthorWithListBooksSerializer`).
2. **–°–ø–∏—Å–æ–∫ –≥–∏–ø–µ—Ä—Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–Ω–∏–≥–∏**   
   ‚Äî –∫–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–Ω–∏–≥–∞—Ö –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è    
   ‚Äî —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã API (`AuthorWithBookLinksSerializer`).

–î–ª—è –≤—ã–±–æ—Ä–∞ –≤—Ç–æ—Ä–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω—É–∂–Ω–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `?mode=links`

---

### serializers.py

```python
from rest_framework import serializers
from .models import Author, Book


class BookSerializer(serializers.ModelSerializer):
    class Meta:
        model = Book
        fields = ['id', 'title', 'year_published']


class AuthorWithListBooksSerializer(serializers.ModelSerializer):
    books = BookSerializer(many=True, read_only=True)

    class Meta:
        model = Author
        fields = ['id', 'name', 'books']


# --- –≤–∞—Ä–∏–∞–Ω—Ç —Å –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞–º–∏ ---
class AuthorWithBookLinksSerializer(serializers.HyperlinkedModelSerializer):
    books = serializers.HyperlinkedRelatedField(
        many=True,
        read_only=True,
        view_name='book-detail',
        lookup_field='pk'
    )

    class Meta:
        model = Author
        fields = ['url', 'id', 'name', 'books']
        extra_kwargs = {
            'url': {'view_name': 'author-detail', 'lookup_field': 'pk'}
        }
```

---

### views.py

```python
from rest_framework import viewsets
from .models import Author, Book
from .serializers import (
    AuthorWithListBooksSerializer,
    AuthorWithBookLinksSerializer,
    BookSerializer,
)


class AuthorViewSet(viewsets.ModelViewSet):
    queryset = Author.objects.all()

    def get_serializer_class(self):
        mode = self.request.query_params.get('mode')
        if mode == 'links':
            return AuthorWithBookLinksSerializer
        return AuthorWithListBooksSerializer


class BookViewSet(viewsets.ModelViewSet):
    queryset = Book.objects.all()
    serializer_class = BookSerializer
```

---

### urls.py

```python
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import AuthorViewSet, BookViewSet

router = DefaultRouter()
router.register(r'authors', AuthorViewSet, basename='author')
router.register(r'books', BookViewSet, basename='book')

urlpatterns = [
    path('', include(router.urls)),
]
```

---

–¢–µ–ø–µ—Ä—å:

*  GET: `http://127.0.0.1:8000/api/authors/` ‚Üí —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤ —Å **–≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∫–Ω–∏–≥–∞–º–∏ (–æ–±—ä–µ–∫—Ç—ã)**
*  GET: `http://127.0.0.1:8000/api/authors/?mode=links` ‚Üí —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤ —Å **–≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏**

## –í—ã–≤–æ–¥—ã

### 1. –ü–ª—é—Å—ã —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

**–°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–Ω–∏–≥–∏)**

* üîπ **–ü–ª—é—Å—ã:**

  * –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–∞—Ö —Å—Ä–∞–∑—É –≤ –æ—Ç–≤–µ—Ç–µ, –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.
  * –£–¥–æ–±–Ω–æ –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ.
* ‚ö†Ô∏è **–ú–∏–Ω—É—Å—ã:**

  * –ï—Å–ª–∏ —É –∞–≤—Ç–æ—Ä–∞ –º–Ω–æ–≥–æ –∫–Ω–∏–≥, –æ—Ç–≤–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Ç—Ä–∞—Ñ–∏–∫.
  * –°–ª–æ–∂–Ω–µ–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–Ω–∏–≥–∏ —á–µ—Ä–µ–∑ API (–Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π PUT/PATCH –Ω–∞ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –∫–Ω–∏–≥–∏).

**–°–ø–∏—Å–æ–∫ –≥–∏–ø–µ—Ä—Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–Ω–∏–≥–∏**

* üîπ **–ü–ª—é—Å—ã:**

  * –û—Ç–≤–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π ‚Äî —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–Ω–∏–≥–∏.
  * –õ–µ–≥—á–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω—ã—Ö.
  * –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º –∫–Ω–∏–≥–∞–º –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
* ‚ö†Ô∏è **–ú–∏–Ω—É—Å—ã:**

  * –ù—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏.

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ ViewSet

* **–ê–≤—Ç–æ—Ä —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∫–Ω–∏–≥–∞–º–∏ (—Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤)**

  * –ß–µ—Ä–µ–∑ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä `AuthorWithListBooksSerializer` –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ **–Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –≤–æ–∑–º–æ–∂–Ω–æ**,  
     –Ω–æ –Ω–æ–≤—ã–µ –∫–Ω–∏–≥–∏ **–Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ –ø–æ–ª–µ `books`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–æ `read_only=True`.
  * –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤—Ç–æ—Ä–∞, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–µ—Ç–æ–¥ `create` 
     –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WritableNestedModelSerializer` –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.

* **–ê–≤—Ç–æ—Ä —Å –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞–º–∏ (—Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫)**

  * –ß–µ—Ä–µ–∑ `AuthorWithBookLinksSerializer` —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ—Ä–∞,  
  –Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥ —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫–∏ **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é**, —Ç.–∫. –ø–æ–ª–µ `books` —Ç–æ–∂–µ `read_only=True`.

–¢–æ –µ—Å—Ç—å, **–≤ –æ–±–æ–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö –¥–æ–±–∞–≤–ª—è—Ç—å –∫–Ω–∏–≥–∏ —Å—Ä–∞–∑—É —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ–ª—å–∑—è**, —Ç–æ–ª—å–∫–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ `/books/`.

---

### 3. –ü—Ä–∏–º–µ—Ä—ã URL –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

* `GET: http://127.0.0.1:8000/api/authors/` ‚Üí —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤ —Å **–≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∫–Ω–∏–≥–∞–º–∏ (–æ–±—ä–µ–∫—Ç—ã)**
* `GET: http://127.0.0.1:8000/api/authors/?mode=links` ‚Üí —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤ —Å **–≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–Ω–∏–≥–∏**
* `GET: http://127.0.0.1:8000/api/authors/1/` ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä —Å –∫–Ω–∏–≥–∞–º–∏ (–æ–±—ä–µ–∫—Ç—ã)
* `GET: http://127.0.0.1:8000/api/authors/1/?mode=links` ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä —Å –∫–Ω–∏–≥–∞–º–∏ (–≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∏)
* `POST: http://127.0.0.1:8000/api/authors/` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞
* `POST: http://127.0.0.1:8000/api/books/` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∞–≤—Ç–æ—Ä—É



