#  DRF Разрешения (`permissions`)

Используются для ограничения доступа к API на уровне представлений (views) или отдельных запросов.

Отвечают на вопрос:
- **Кто может выполнять действие?**
- (в отличие от **аутентификации**, которая отвечает за **Кто вы есть?**).

Все виды разрешений можно сгуппировать по следующим параметрам:

## 1. По уровню настройки (где задаются)

| Подкатегория       | Описание                                                 | Пример                                   |
| ------------------ | -------------------------------------------------------- | ---------------------------------------- |
| **1.1 Локальные**  | Указываются в конкретном `APIView` / `ViewSet`           | `permission_classes = [IsAuthenticated]` |
| **1.2 Глобальные** | Задаются один раз для всех представлений в `settings.py` | `DEFAULT_PERMISSION_CLASSES = [...]`     |

---

## 2. По типу реализации (откуда берутся)

| Подкатегория       | Описание                                           | Пример                                       |
| ------------------ | -------------------------------------------------- | -------------------------------------------- |
| **2.1 Встроенные** | Предоставлены самим DRF                            | `IsAuthenticated`, `AllowAny`, `IsAdminUser` |
| **2.2 Кастомные**  | Пишутся вручную (унаследованы от `BasePermission`) | `IsOwner`, `IsAdminOrReadOnly`               |

---

## 3. По уровню проверки (на что проверяют)

| Подкатегория              | Описание                                 | Проверка выполняется где                          |
| ------------------------- | ---------------------------------------- | ------------------------------------------------- |
| **3.1 На уровне запроса** | Проверяют доступ к *всему* представлению | Метод `has_permission(request, view)`             |
| **3.2 На уровне объекта** | Проверяют доступ к *конкретному объекту* | Метод `has_object_permission(request, view, obj)` |

---

## 4. По политике доступа (что разрешают)

| Подкатегория                       | Описание                                                  | Примеры                                          |
| ---------------------------------- | --------------------------------------------------------- | ------------------------------------------------ |
| **4.1 Без ограничений**            | Разрешён полный доступ                                    | `AllowAny`                                       |
| **4.2 Только аутентифицированным** | Только авторизованные пользователи                        | `IsAuthenticated`                                |
| **4.3 Только администраторам**     | Только `is_staff`                                         | `IsAdminUser`                                    |
| **4.4 Только чтение для анонимов** | Неавторизованные — чтение, авторизованные — изменение     | `IsAuthenticatedOrReadOnly`                      |
| **4.5 По правам Django**           | Проверяются стандартные `add`, `change`, `delete`, `view` | `DjangoModelPermissions`                         |
| **4.6 По владельцу**               | Только владелец объекта                                   | Кастомный `IsOwner`                              |
| **4.7 Комбинированные**            | Объединяют несколько условий                              | `IsAuthenticated & IsOwner`, `IsAdminOrReadOnly` |

---

## Итого: структура классификации

| № | Критерий          | Категории                                                 |
| - | ----------------- | --------------------------------------------------------- |
| 1 | Уровень настройки | Локальные / Глобальные                                    |
| 2 | Тип реализации    | Встроенные / Кастомные                                    |
| 3 | Уровень проверки  | Request-level / Object-level                              |
| 4 | Политика доступа  | Разные стратегии (от “всем можно” до “только владельцам”) |

