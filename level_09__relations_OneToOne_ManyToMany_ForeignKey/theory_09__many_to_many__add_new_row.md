## –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Å–≤—è–∑–∏ ManyToMany

–≠—Ç–∞ "–Ω–µ–æ–±—ã—á–Ω–∞—è" —Å–≤—è–∑—å –∏–º–µ–µ—Ç —Å–≤–æ–∏ "–Ω–µ–æ–±—ã—á–Ω—ã–µ" –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –Ω–∏ –≤ OneToOne, –Ω–∏ –≤ OneToMany.

## üì¶ –ú–æ–¥–µ–ª–∏ 

(–ë–µ—Ä—ë–º –≤–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ `through` ‚Äî –æ–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π, —á—Ç–æ–±—ã –ø–æ-–º–∞–∫—Å–∏–ºy–º—É —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å "–∫–æ—Ä–æ–±–æ—á–Ω—ã–µ" –º–µ—Ç–æ–¥—ã Django)
```python
class Genre(models.Model):
    name = models.CharField(max_length=100, unique=True)

class Book(models.Model):
    title = models.CharField(max_length=200)
    year_published = models.IntegerField()
    genres = models.ManyToManyField(Genre, related_name='books')
```

---


### üîπ –°–ø–æ—Å–æ–± 1: —Å–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É, –∞ –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—Ç—å –∂–∞–Ω—Ä—ã

```python
# 1. –°–æ–∑–¥–∞—ë–º –∂–∞–Ω—Ä—ã
fantasy, _ = Genre.objects.get_or_create(name="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞")
drama, _ = Genre.objects.get_or_create(name="–î—Ä–∞–º–∞")

# 2. –°–æ–∑–¥–∞—ë–º –∫–Ω–∏–≥—É
author, _ = Author.objects.get_or_create(name="–î–∂–æ–Ω –†. –†. –¢–æ–ª–∫–∏–Ω")
book = Book.objects.create(author=author, title="–•–æ–±–±–∏—Ç, –∏–ª–∏ –¢—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ", year_published=1937)

# 3. –ú–µ—Ç–æ–¥ .add –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –∂–∞–Ω—Ä—ã –∫ –∫–Ω–∏–≥–µ
#    (–µ—Å–ª–∏ fantasy –∏ drama —É–∂–µ –±—ã–ª–∏ ‚Äî –º–µ—Ç–æ–¥ .add –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∏—Ö)
book.genres.add(fantasy, drama)
```

---

### üîπ –°–ø–æ—Å–æ–± 2: —Å–æ–∑–¥–∞—Ç—å –∂–∞–Ω—Ä—ã, —Å–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É, –ø–æ—Ç–æ–º —Å–≤—è–∑–∞—Ç—å —Å–ø–∏—Å–∫–æ–º

```python
# –°–æ–∑–¥–∞—ë–º –∞–≤—Ç–æ—Ä–∞ –∏ –∫–Ω–∏–≥—É
author, _ = Author.objects.get_or_create(name="–û–ª–¥–æ—Å –•–∞–∫—Å–ª–∏")
book, _  = Book.objects.get_or_create(author=author, title="–û –¥–∏–≤–Ω—ã–π –Ω–æ–≤—ã–π –º–∏—Ä", year_published=1932)

# –î–æ–±–∞–≤–ª—è–µ–º –∂–∞–Ω—Ä—ã —Å—Ä–∞–∑—É —Å–ø–∏—Å–∫–æ–º
# –º–µ—Ç–æ–¥ .set –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤ —É –¥–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–∏
book.genres.set([fantasy, drama]) 
```

---

### üîπ –°–ø–æ—Å–æ–± 3: —Å–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É –±–µ–∑ –∂–∞–Ω—Ä–æ–≤, –ø–æ—Ç–æ–º –æ—á–∏—Å—Ç–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å

```python
author, _ = Author.objects.get_or_create(name="–ö–æ—Ä–º–∞–∫ –ú–∞–∫–∫–∞—Ä—Ç–∏")
book = Book.objects.create(author=author, title="–î–æ—Ä–æ–≥–∞", year_published=2006)

# –î–æ–±–∞–≤–∏—Ç—å –∂–∞–Ω—Ä
book.genres.add(fantasy)

# –û—á–∏—Å—Ç–∏—Ç—å –∂–∞–Ω—Ä—ã
book.genres.clear()
book.genres.set([fantasy, drama]) 
```

---

## üìå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: —á–µ—Ä–µ–∑ –∂–∞–Ω—Ä –ø–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥–∏

```python
# –ù–∞–π—Ç–∏ –≤—Å–µ –∫–Ω–∏–≥–∏ –∂–∞–Ω—Ä–∞
genre = Genre.objects.get(name="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞")
books = genre.books.all()
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

| –ú–µ—Ç–æ–¥                  | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                         |
| ---------------------- | ---------------------------------- |
| `add(obj1, obj2, ...)` | –î–æ–±–∞–≤–ª—è–µ—Ç —Å–≤—è–∑—å (–Ω–µ —É–¥–∞–ª—è—è —Å—Ç–∞—Ä—ã–µ) |
| `set([obj1, obj2])`    | –ó–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤—è–∑–∏    |
| `remove(obj)`          | –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–≤—è–∑—å           |
| `clear()`              | –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å–≤—è–∑–∏                  |


