# –ú–µ—Ç–æ–¥—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### üîß –¢–∞–±–ª–∏—Ü–∞: –ú–µ—Ç–æ–¥—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ QuerySet
–í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–ª–æ–Ω–∫–æ–π **"–í—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã"**, –≤ –∫–æ—Ç–æ—Ä–æ–π —É–∫–∞–∑–∞–Ω–æ, –≤—ã–∑—ã–≤–∞–µ—Ç –ª–∏ –º–µ—Ç–æ–¥ —Å–∏–≥–Ω–∞–ª—ã Django (`pre_save`, `post_save` –∏ —Ç.–ø.):

---

### üîß –¢–∞–±–ª–∏—Ü–∞: –ú–µ—Ç–æ–¥—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ QuerySet

| –ú–µ—Ç–æ–¥                         | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                | –ü—Ä–∏–º–µ—Ä                                                                                   | –ü–æ—è—Å–Ω–µ–Ω–∏–µ                                                                                  | –í—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã |
| ----------------------------- | --------------------------------------------------------- | ---------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ---------------- |
| `update()`                    | –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π                               | `Book.objects.filter(author="Orwell").update(year_published=1950)`                       | –û–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ SQL-–∑–∞–ø—Ä–æ—Å, **–±–µ–∑ –≤—ã–∑–æ–≤–∞ `save()` –∏ —Å–∏–≥–Ω–∞–ª–æ–≤**.                 | ‚ùå –ù–µ—Ç            |
| `save()`                      | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏                          | `book = Book.objects.get(id=1); book.title = "New"; book.save()`                         | –í—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã `pre_save`, `post_save`, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏.                       | ‚úÖ –î–∞             |
| `update_or_create()`          | –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å                              | `Book.objects.update_or_create(author="Huxley", defaults={...})`                         | –°–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏** –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã, **–ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ ‚Äî –Ω–µ—Ç**. | ‚õî –ß–∞—Å—Ç–∏—á–Ω–æ      |
| `bulk_update()` (Django 3.2+) | –ú–∞—Å—Å–æ–≤–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤                | `Book.objects.bulk_update([b1, b2], ['title'])`                                          | –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î, **—Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è**.                             | ‚ùå –ù–µ—Ç            |
| `get_or_create()` + `save()`  | –ü–æ–ª—É—á–∞–µ—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –∏ –≤—Ä—É—á–Ω—É—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è | `book, _ = Book.objects.get_or_create(author="Rowling"); book.title = "HP"; book.save()` | –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `.save()` —Å–∏–≥–Ω–∞–ª—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è.                                 | ‚úÖ –î–∞             |
| `F()`                         | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π (SQL-side) | `Book.objects.filter(...).update(year=F('year') + 1)`                                    | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `update()`, –ø–æ—ç—Ç–æ–º—É **—Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è**.                         | ‚ùå –ù–µ—Ç            |

---

### üîé –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:

* ‚úÖ **–î–∞** ‚Äî –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã Django (`pre_save`, `post_save`).
* ‚ùå **–ù–µ—Ç** ‚Äî –º–µ—Ç–æ–¥ **–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç** —Å–∏–≥–Ω–∞–ª—ã.
* ‚õî **–ß–∞—Å—Ç–∏—á–Ω–æ** ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏, –Ω–æ–Ω–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.


---

### üîç –ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–æ –≤—ã–±–æ—Ä—É –º–µ—Ç–æ–¥–∞

| –°—Ü–µ–Ω–∞—Ä–∏–π                                | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥          |
| --------------------------------------- | ------------------------------ |
| –û–±–Ω–æ–≤–∏—Ç—å **–º–Ω–æ–≥–æ –∑–∞–ø–∏—Å–µ–π** —Ä–∞–∑–æ–º        | `update()` –∏–ª–∏ `bulk_update()` |
| –û–±–Ω–æ–≤–∏—Ç—å **–æ–¥–Ω–æ –ø–æ–ª–µ** —É –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ | `save()`                       |
| –£–≤–µ–ª–∏—á–∏—Ç—å —á–∏—Å–ª–æ, –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è –æ–±—ä–µ–∫—Ç     | `F()` + `update()`             |
| –û–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç             | `update_or_create()`           |
| –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Python       | `bulk_update()`                |

---

### üîÅ –ü—Ä–∏–º–µ—Ä –º–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `update()`

```python
Book.objects.filter(year_published__lt=1800).update(author="Unknown")
```

üìå –í—Å–µ –∫–Ω–∏–≥–∏, –∏–∑–¥–∞–Ω–Ω—ã–µ –¥–æ 1800 –≥–æ–¥–∞, –ø–æ–ª—É—á–∞—Ç –∞–≤—Ç–æ—Ä–∞ "Unknown".

---

### ‚õè –ü—Ä–∏–º–µ—Ä —Å `F()` ‚Äî –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç

```python
from django.db.models import F

Book.objects.all().update(year_published=F('year_published') + 1)
```

üìå –£–≤–µ–ª–∏—á–∏—Ç –≥–æ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ 1 —É –≤—Å–µ—Ö –∫–Ω–∏–≥.

