## В какое приложение лучше добавить отзывы пользователей?

### Вариант 1. В приложении `shop`

**Описание:**

* Модель `Review` создаётся внутри `shop.models`
* Связь напрямую с `Product` (FK) и `User` (FK)

**Плюсы:**

* Логично: отзывы относятся к товарам, а товары — к `shop`.
* Проще делать запросы: `product.reviews.all()` или агрегировать рейтинги.
* Можно держать все связанные с товарами сущности в одном приложении.

**Минусы:**

* Если позже появятся отзывы для чего-то ещё (например, магазинов, категорий), придётся создавать отдельные модели.

**Пример модели:**

```python
class Review(models.Model):
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="reviews")
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    rating = models.IntegerField(choices=[(i,i) for i in range(1,6)])
    comment = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ('product', 'user')  # чтобы один пользователь мог оставить только один отзыв
```

---

### **Вариант 2. В приложении `users`**

**Описание:**

* Модель `Review` создаётся в `users.models`
* Связь через `User` (FK) и `Product` (FK на `shop.models.Product`)

**Плюсы:**

* Удобно, если основной фокус — активность пользователя (все отзывы и рейтинги хранятся рядом с пользователем).

**Минусы:**

* Нарушается логическая привязка к `shop`.
* Для выборки всех отзывов товара придётся делать join через `User`, что менее удобно.

---

### Выводы

Для малых и средних проектов однозначно удобнее **вариант 1**: модель `Review` в приложении `shop`.

* Логически и архитектурно это наиболее чисто.
* Позволяет легко добавлять фильтры, агрегировать рейтинги товаров, отображать отзывы на странице товара.
* Связь с пользователем (`user = ForeignKey(User)`) всё ещё сохраняется.
* Вероятность "расширения" сферы оценок в будущем относительно мала.

