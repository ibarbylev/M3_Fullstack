# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏–∑ –≥–æ—Ç–æ–≤–æ–π –î–ë

–î–ª—è —ç—Ç–æ–≥–æ –≤ Django —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫–æ–º–∞–Ω–¥–∞: `./manage.py inspectdb`,  
–∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î.

---

## üîß –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `settings.py` –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω—É–∂–Ω–æ–π –±–∞–∑–µ:

```python
DATABASES = {
    'default': {
        . . . 
   }
}
```

---

### 2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ (—Å–æ–∑–¥–∞–π—Ç–µ) –º–æ–¥–µ–ª–∏ –∏–∑ –ë–î

```bash
python manage.py inspectdb > myapp/all_models.py
```

‚ö†Ô∏è –í–ù–ò–ú–ï–ù–ò–ï!!!
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–º–µ–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥–µ–ª–∏, –Ω–æ –ù–ï —É–º–µ–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏—Ö –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º. 
–ü–æ—ç—Ç–æ–º—É, —Ä–∞–∑–Ω–æ—Å –º–æ–¥–µ–ª–µ–π –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –¥–µ–ª–∞–µ—Ç—Å—è —É–∂–µ –ø–æ—Ç–æ–º.  
–í—Ä—É—á–Ω—É—é.

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∏–º—è —Ñ–∞–π–ª–∞ –º–æ–¥–µ–ª–µ–π –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `all_`.

---

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª–∏

* –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `models.py`: –ø–æ–ª—è, —Ç–∏–ø—ã, —Å–≤—è–∑–∏
* –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –º–æ–¥–µ–ª–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
* –í–æ–∑–º–æ–∂–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ `Meta` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (
  * `managed = False`, 
  * `db_table = 'your_table'`
  * –∏ —Ç.–¥.)

---

### 4. –£–±–µ—Ä–∏—Ç–µ `managed = False`, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü–∞–º–∏ —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `inspectdb` –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –∫–∞–∂–¥—É—é –º–æ–¥–µ–ª—å:

```python
class Meta:
    managed = False
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ Django –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ–π.  
–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –º–æ–¥–µ–ª–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é –º–∏–≥—Ä–∞—Ü–∏–π,  
–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ—á–∫—É `managed = False`. 


---

### 5. –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
python manage.py makemigrations myapp
```

‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!!!
–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, —Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã. 
–ù–û **`migrate` –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏—Ç**, –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —É–∂–µ –µ—Å—Ç—å!

–ü–æ—ç—Ç–æ–º—É, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—É–Ω–∫—Ç 6:
---

### 6. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º `migrate`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
python manage.py migrate --fake-initial
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º `--fake-initial` –æ–∑–Ω–∞—á–∞–µ—Ç:  
¬´–¢–∞–±–ª–∏—Ü—ã —É–∂–µ –µ—Å—Ç—å, –ø–æ—ç—Ç–æ–º—É –º–∏–≥—Ä–∞—Ü–∏—è (–∫–∞–∫ –±—ã!) —É–∂–µ –±—ã–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞¬ª.

---

## üìå –ò –µ—â—ë —Ä–∞–∑ –Ω–∞ –∑–∞—á—ë—Ç:

| –≠—Ç–∞–ø | –ß—Ç–æ –¥–µ–ª–∞–µ–º                                                |
| ---- |-----------------------------------------------------------|
| 1    | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º `DATABASES`                                   |
| 2    | `inspectdb > all_models.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π           |
| 3    | –ü—Ä–æ–≤–µ—Ä—è–µ–º/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏                              |
| 4    | –£–±–∏—Ä–∞–µ–º `managed = False`, –µ—Å–ª–∏ —Ö–æ—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü–∞–º–∏ |
| 5    | `makemigrations`                                          |
| 6    | `migrate --fake-initial`                                  |

